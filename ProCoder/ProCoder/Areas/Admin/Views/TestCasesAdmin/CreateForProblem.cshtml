@model ProCoder.Models.TestCase

@{
    var problem = ViewData["Problem"] as ProCoder.Models.Problem;
    ViewData["Title"] = "Thêm Test Case cho " + problem?.ProblemName;
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container">
    <div class="card shadow-sm p-4">
        <div class="card-header py-3 d-flex justify-content-between align-items-center">
            <h6 class="m-0 font-weight-bold text-primary">
                Thêm Test Case cho <strong>@problem?.ProblemCode</strong> - @problem?.ProblemName
            </h6>
            <a href="@Url.Action("ProblemTestCases", "TestCasesAdmin", new { area = "Admin", problemId = Model.ProblemId })" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Quay lại
            </a>
        </div>
        
        <div class="card-body">
            <form action="@Url.Action("CreateForProblem", "TestCasesAdmin", new { area = "Admin", problemId = Model.ProblemId })" method="post">
                @Html.AntiForgeryToken()
                <input type="hidden" name="ProblemId" value="@Model.ProblemId" />

                <div class="form-group mb-3">
                    <label for="SchemaDataId" class="form-label">Dữ liệu mẫu</label>
                    <select class="form-select" id="SchemaDataId" name="SchemaDataId">
                        <option value="">-- Không sử dụng dữ liệu mẫu --</option>
                        @if (ViewData["SchemaDataId"] != null)
                        {
                            @foreach (var item in (SelectList)ViewData["SchemaDataId"])
                            {
                                <option value="@item.Value">@item.Text</option>
                            }
                        }
                    </select>
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.SchemaDataId)</span>
                    <small class="form-text text-muted">Chọn bộ dữ liệu mẫu sẽ được sử dụng cho test case này.</small>
                </div>

                <div class="form-group mb-3">
                    <label for="TestQuery" class="form-label">Câu truy vấn kiểm tra</label>
                    <textarea class="form-control" id="TestQuery" name="TestQuery" rows="5" required
                            placeholder="Nhập câu truy vấn SQL để kiểm tra"></textarea>
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.TestQuery)</span>
                </div>

                <div class="form-group mb-3">
                    <label for="ExpectedResult" class="form-label">Kết quả mong đợi</label>
                    <textarea class="form-control" id="ExpectedResult" name="ExpectedResult" rows="5" required
                            placeholder="Kết quả mong đợi khi thực thi câu truy vấn"></textarea>
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ExpectedResult)</span>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group mb-3">
                            <label for="OrderNumber" class="form-label">Thứ tự</label>
                            <input type="number" class="form-control" id="OrderNumber" name="OrderNumber" 
                                   value="@Model.OrderNumber" min="1" required />
                            <span class="text-danger">@Html.ValidationMessageFor(m => m.OrderNumber)</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group mb-3">
                            <label for="Score" class="form-label">Điểm</label>
                            <input type="number" class="form-control" id="Score" name="Score" 
                                   value="@Model.Score" min="0" required />
                            <span class="text-danger">@Html.ValidationMessageFor(m => m.Score)</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group mb-3 mt-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="IsHidden" name="IsHidden" value="true" @(Model.IsHidden ? "checked" : "")>
                                <label class="form-check-label" for="IsHidden">
                                    Ẩn test case
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-end mt-4">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Lưu test case
                    </button>
                </div>
            </form>
        </div>
    </div>
</div> 