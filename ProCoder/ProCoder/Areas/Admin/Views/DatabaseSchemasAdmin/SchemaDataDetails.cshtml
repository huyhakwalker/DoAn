@model ProCoder.Models.SchemaData

@{
    ViewData["Title"] = "Chi tiết dữ liệu Schema";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

@section Styles {
    <style>
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 14px;
            line-height: 1.5;
            border: 1px solid #ddd;
        }
        .card {
            margin-bottom: 20px;
        }
        .badge-info {
            background-color: #17a2b8;
        }
    </style>
}

<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Chi tiết dữ liệu schema</h2>
        <div>
            <a href="@Url.Action("SchemaDataList", "DatabaseSchemasAdmin", new { area = "Admin", schemaId = Model.DatabaseSchemaId })" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Quay lại
            </a>
            <a href="@Url.Action("EditSchemaData", "DatabaseSchemasAdmin", new { area = "Admin", schemaId = Model.DatabaseSchemaId, dataId = Model.SchemaDataId })" class="btn btn-primary">
                <i class="fas fa-edit"></i> Chỉnh sửa
            </a>
        </div>
    </div>

    <div class="alert alert-info mb-4">
        <h5><i class="fas fa-info-circle"></i> Thông tin cơ bản</h5>
        <p><strong>Tên dữ liệu:</strong> @Model.DataName</p>
        <p><strong>Schema:</strong> @Model.DatabaseSchema?.SchemaName</p>
        <p>
            <strong>Đang được sử dụng bởi:</strong>
            <span class="badge badge-info">@ViewBag.TestCasesCount Test Case</span>
        </p>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-file-alt"></i> Mô tả</h5>
                </div>
                <div class="card-body">
                    @if (string.IsNullOrEmpty(Model.Description))
                    {
                        <p class="text-muted"><i>Không có mô tả</i></p>
                    }
                    else
                    {
                        <p>@Model.Description</p>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-database"></i> Nội dung dữ liệu</h5>
                </div>
                <div class="card-body">
                    <pre><code class="sql">@Model.DataContent</code></pre>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-calendar-alt"></i> Thời gian tạo</h5>
                </div>
                <div class="card-body">
                    <p>@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm:ss")</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-calendar-alt"></i> Thời gian cập nhật</h5>
                </div>
                <div class="card-body">
                    <p>@Model.UpdatedAt.ToString("dd/MM/yyyy HH:mm:ss")</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Thêm highlight syntax cho SQL code nếu có thư viện highlight.js
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            }
        });
    </script>
} 